<!DOCTYPE html>
<html>
<head>
    <title>Canvas lottery brush nick</title>
    <meta charset="utf-8"/>
</head>
<body>
<div style="width:640px;margin:auto;">
        <canvas id="canvas2" width="300px" height="500px" style="background-color:lightblue;"></canvas>
</div>

<script>

    var canvas2 = document.getElementById("canvas2");
    var context2 = canvas2.getContext("2d");

    //画笔
    context2.font='20px Arial';
    // context2.strokeText('NICK画笔',100,30);//写个头
    //为canvas元素onmousedown和onmouseup事件

    context2.strokeStyle='blue';//线色
    context2.lineCap = "round";//连接处为圆形
    context2.lineWidth =10;//线框

    canvas2.addEventListener('mousedown', function(ev){
        ev.preventDefault();
        var isX = ev.pageX;
        var isY = ev.pageY;
        var x = isX - canvas2.offsetLeft;
        var y = isY - canvas2.offsetTop;
        context2.beginPath();
        context2.moveTo(x, y);
        function StartMove(ev){
            var isX1 = ev.pageX;
            var isY1 = ev.pageY;
            var x1 = isX1 - canvas2.offsetLeft;
            var y1 = isY1 - canvas2.offsetTop;
            context2.lineTo(x1, y1);

            context2.stroke();
            context2.beginPath();
            context2.moveTo(x1, y1);
        };
        function EndMove(ev){
            // var isX1 = ev.pageX;
            // var isY1 = ev.pageY;
            // var x1 = isX1 - canvas2.offsetLeft;
            // var y1 = isY1 - canvas2.offsetTop;
            // context2.lineTo(x1, y1);
            // context2.stroke();
            canvas2.removeEventListener('mousemove', StartMove, false);
            canvas2.removeEventListener('mouseup', EndMove, false);
        };
        canvas2.addEventListener('mousemove', StartMove, false);
        canvas2.addEventListener('mouseup', EndMove, false);
    }, false);
</script>
</body>
</html>
